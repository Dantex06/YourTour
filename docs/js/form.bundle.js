document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".collect-tour_form"),t=e.querySelector(".button_tour"),n=e.querySelector(".button_reset"),o=e.querySelectorAll('input[name="age"]'),r=e.querySelector('input[name="license"]'),l=e.querySelector('input[name="phone"]'),u=e.querySelector('input[name="email"]');function i(e){const[t,n,o]=e.split("-");if(!o||!n||!t)return null;if(4!==t.length)return null;const r=new Date(`${t}-${n}-${o}`);return isNaN(r)?null:r}o.forEach(((e,t)=>{e.value=0===t?"yes":"no"})),l.addEventListener("input",(function(e){if(e.inputType?.includes("delete"))return;let t=this.value.replace(/\D/g,"");if(t=t.substring(0,11),!t.length)return void(this.value="+7 (");const n=t.substring(1).match(/(\d{0,3})(\d{0,3})(\d{0,2})(\d{0,2})/);this.value=`+7 (${n[1]}${3===n[1]?.length?") ":""}${n[2]}${3===n[2]?.length?"-":""}${n[3]}${2===n[3]?.length?"-":""}${n[4]}`})),e.querySelectorAll('input[name="date from"], input[name="date to"]'),t.addEventListener("click",(function(t){if(t.preventDefault(),!r.checked)return void alert("Пожалуйста, примите условия Лицензионного договора");const n=e.querySelector('input[name="age"]:checked');if(!n)return void alert("Пожалуйста, укажите, есть ли вам 18 лет");if("no"===n.value)return void alert("Извините, вы должны быть совершеннолетним для поиска тура");const o=l.value.replace(/\D/g,"");if(11!==o.length||!o.startsWith("7"))return void alert("Пожалуйста, введите корректный номер телефона (+7 XXX XXX-XX-XX)");const c=u.value.trim();if(!c)return void alert("Пожалуйста, введите ваш email");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c))return void alert("Пожалуйста, введите корректный email (например, example@mail.com)");const a=e.querySelector('input[name="date from"]'),d=e.querySelector('input[name="date to"]'),s=i(a.value),f=i(d.value);if(console.log(s,f),!s||!f)return void alert("Пожалуйста, укажите корректные даты в формате ДД.ММ.ГГГГ");if(function(e){const t=new Date;return t.setHours(0,0,0,0),e<t}(s))return void alert('Дата "от" не может быть раньше сегодняшнего дня');if(f<s)return void alert('Дата "до" не может быть раньше даты "от"');const p=new FormData(e),m=Object.fromEntries(p.entries());console.log("Данные формы:",m),document.location.href="#choose_tour"})),n.addEventListener("click",(function(t){t.preventDefault(),e.reset()}))})),document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".dropdown").forEach((e=>{const t=e.querySelector(".dropdown__input"),n=e.querySelector(".dropdown__button"),o=()=>{e.classList.toggle("dropdown--opened"),document.querySelectorAll(".dropdown--opened").forEach((t=>{t!==e&&t.classList.remove("dropdown--opened")}))};[t,n].forEach((e=>{e.addEventListener("click",o)})),e.querySelectorAll(".dropdown__item").forEach((n=>{n.addEventListener("click",(function(){t.value=this.textContent,e.classList.remove("dropdown--opened")}))})),document.addEventListener("click",(function(t){e.contains(t.target)||e.classList.remove("dropdown--opened")}))}))}));